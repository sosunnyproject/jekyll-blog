## 3.3 ~ 3.7 ê°•ì˜

### ToDoList with Events, localStorage

- [submit code sandbox link](https://codesandbox.io/s/empty-blueprint-c2guw)
- [code solution](https://codesandbox.io/s/day-eight-nine-solution-8817f)

```
Make a To Do list with two boards: Pending, Finished.
Allow the user to switch between boards.
Allow the user to delete To Dos.
Save everything on localStorage and restore everything on refresh.
```

### 3.5 ê°•ì˜
- `<form><input>` íƒœê·¸: ì…ë ¥ì°½, ì…ë ¥ê°’
- `<ul><li>` íƒœê·¸: ë¦¬ìŠ¤íŠ¸ ê°’ 
- `<li>` ê°’ ìƒì„±: `document.createElement, li.appendChild` ë©”ì†Œë“œ ì‚¬ìš©í•´ì„œ flexible í•˜ê²Œ ê° ë¦¬ìŠ¤íŠ¸ë³„ í…ìŠ¤íŠ¸ ë° ë²„íŠ¼ ìƒì„±
- localStorage : pending, finished ë‘ ê°œ ë§Œë“¤ê¸°

### 3.6 ê°•ì˜
- todos ë¥¼ array object ë¡œ...


### Major Debug

1. array ì— ë‹´ê¸´ objectì˜ id ê°’ì„ access í•˜ë ¤ê³  í•˜ëŠ”ë°, consoleì—ì„œ objectëŠ” ì°íˆì§€ë§Œ, property ê°’ì´ undefined ë¡œ ë‚˜ì˜´. 
- ë‹¤ë¥¸ í•¨ìˆ˜ ì•ˆì—ì„œëŠ” ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸
- ì•„ë§ˆ ì‹œê°„ì°¨ì˜ ë¬¸ì œì¸ ë“¯ í•´ì„œ, if ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•´ì„œ undefined ì¸ ê²½ìš°ë¥¼ ì œì™¸í•˜ë„ë¡ ë””ë²„ê¹…
- array's last item's id ê°’ì„ êµ¬í•˜ëŠ” ì´ìœ : if not, ê¸°ì¡´ array ì— ë‹´ê¸´ objectì˜ id ì™€ ì¶©ëŒí•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•´ì„œ, ì‚­ì œí•˜ê±°ë‚˜ í•  ë•Œ ì—ëŸ¬ ë°œìƒí•¨. id ê°’ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì¡°ì¹˜.
```
// paint finished list
function createFinished(todo) {
  // create li with btn
  let newId = finishedTodos.length + 1;
  if (finishedTodos.length !== 0) {
    const lastItem = finishedTodos[finishedTodos.length - 1];
    newId = lastItem.id + 1;
    console.log(newId);
    // if ë¬¸ ì²´í¬ ì•ˆí•˜ëŠ” ê²½ìš°, ë¡œë”©ì´ ë¯¸ì²˜ ì•ˆë˜ì–´ì„œ property access ë¥¼ ëª»í•¨.
  }
  const li = document.createElement("li");

// ì´í•˜ ìƒëµ
```

2. parseInt íŒŒë¼ë¯¸í„° ì‹¤ìˆ˜
- ë‘ë²ˆì§¸ ì¸ìëŠ” nì§„ìˆ˜ë¥¼ ê²°ì •í•˜ëŠ”ë°, 2ë¼ê³  ì¨ì„œ ê³„ì† ì˜¤ë¥˜ ë‚¬ì—ˆìŒ
```
  // delete according index
  const cleanTodos = toDos.filter(function(todo) {
    return todo.id !== parseInt(li.id, 10);
  });
```

3. ì½”ë“œ divide í•´ë³´ê¸°

- li íƒœê·¸ë¥¼ ê·¸ë¦¬ëŠ” ë¶€ë¶„ë“¤ ì¤‘ ê²¹ì¹˜ëŠ” ê²Œ ìˆìŒ.
- ê¸°ì¡´ ë°©ì‹: createPending(), createFinished() ê°ê°ì—ì„œ li íƒœê·¸ ë° í•˜ìœ„ ì†ì„±ë“¤ì„ ë‹¤ ê·¸ë¦°ë‹¤.
```js
// paint pending list
function createPending(todo) {
  // create li with btn
  const li = document.createElement("li");
  let newId = pendingTodos.length + 1;
  if (pendingTodos.length !== 0) {
    const lastItem = pendingTodos[pendingTodos.length - 1];
    newId = lastItem.id + 1;
  }
  const doneBtn = document.createElement("button");
  const delBtn = document.createElement("button");
  const textTodo = document.createTextNode(todo);
  doneBtn.innerText = "ğŸ™†â€â™€ï¸";
  delBtn.innerText = "ğŸ™…";
  li.id = newId;
  li.appendChild(doneBtn);
  li.appendChild(delBtn);
  li.appendChild(textTodo);
  pending.appendChild(li);

  // addEventListener: action per button
  delBtn.addEventListener("click", deleteTodo);
  doneBtn.addEventListener("click", moveTodo);

  // save as an object, not string
  const todoObj = { content: todo, id: newId };
  pendingTodos.push(todoObj);
  saveToPending(); // save the updated array
}
```
- ë¶„í•  í›„ ì½”ë“œ
  - .insertBefore ì´ë¼ëŠ” ë©”ì†Œë“œë¥¼ ì¨ì„œ pending/finished ê°ê° ë‹¤ë¥¸ ë²„íŠ¼ì„ ë”°ë¡œ li íƒœê·¸ ì•ˆì— ì¶”ê°€í•´ì•¼í•¨.

```js
function buildGenericLi(todo, todoList) {
  // create li with btn
  let newId = todoList.length + 1;
  if (todoList.length !== 0) {
    const lastItem = todoList[todoList.length - 1];
    newId = lastItem.id + 1;
    console.log(newId);
    // if ë¬¸ ì²´í¬ ì•ˆí•˜ëŠ” ê²½ìš°, ë¡œë”©ì´ ë¯¸ì²˜ ì•ˆë˜ì–´ì„œ property access ë¥¼ ëª»í•¨.
  }
  const li = document.createElement("li");
  const delBtn = document.createElement("button"); // delete
  const textTodo = document.createTextNode(todo);
  delBtn.innerText = "ğŸ™…";
  li.id = newId;
  li.appendChild(delBtn);
  li.appendChild(textTodo);
  todoList.appendChild(li); // add to html
  return li;
}

// paint finished list
function createFinished(todo) {
  const li = buildGenericLi(todo, finishedTodos);
  const delBtn = li.childNodes[0];
  console.log(delBtn);

  const backBtn = document.createElement("button"); // back to Pending
  backBtn.innerText = "ğŸ¤·";
  li.insertBefore(backBtn, delBtn);

  // addEventListener: action per button
  backBtn.addEventListener("click", backToPending);
  delBtn.addEventListener("click", deleteTodo);

  // save as an object, not string
  const doneObj = { content: todo, id: li.id };
  finishedTodos.push(doneObj);
  saveToFinished(); // save current [] to localStorage
}
```

- parameter ì…ë ¥ ê°’ìœ¼ë¡œ pending/finishedë¥¼ êµ¬ë³„í•´ì„œ createPending/createFinishedë¥¼ ë”ìš± ì¤„ì—¬ë³´ê¸°
```js

// create li with btn
function buildGenericLi(todo, parentList, parentName) {
  let newId = parentList.length + 1;
  if (parentList.length !== 0) {
    const lastItem = parentList[parentList.length - 1];
    newId = lastItem.id + 1;
    console.log(newId);
    // if ë¬¸ ì²´í¬ ì•ˆí•˜ëŠ” ê²½ìš°, ë¡œë”©ì´ ë¯¸ì²˜ ì•ˆë˜ì–´ì„œ property access ë¥¼ ëª»í•¨.
  }
  const li = document.createElement("li");
  const textTodo = document.createTextNode(todo);
  const delBtn = document.createElement("button"); // delete
  li.id = newId;
  delBtn.innerText = "ğŸ™…";
  li.appendChild(delBtn);
  li.appendChild(textTodo);
  delBtn.addEventListener("click", deleteTodo);

  let extraBtn;
  if (parentName === "pending") {
    extraBtn = document.createElement("button");
    extraBtn.innerText = "ğŸ™†â€â™€ï¸";
    extraBtn.addEventListener("click", moveTodo);
  } else {
    extraBtn = document.createElement("button"); // back to Pending
    extraBtn.innerText = "ğŸ¤·";
    extraBtn.addEventListener("click", backToPending);
  }

  li.insertBefore(extraBtn, delBtn);
  return li;
}

// paint pending list
function createPending(todo) {
  const li = buildGenericLi(todo, pendingTodos, "pending");
  pending.appendChild(li); // add to html tag

  // save as an object, not string
  const todoObj = { content: todo, id: parseInt(li.id) };
  pendingTodos.push(todoObj);
  saveToPending(); // save current [] to localStorage
}

// paint finished list
function createFinished(todo) {
  const li = buildGenericLi(todo, finishedTodos, "finished");
  finished.appendChild(li); // add to html tag

  // save as an object, not string
  const doneObj = { content: todo, id: parseInt(li.id) };
  finishedTodos.push(doneObj);
  saveToFinished(); // save current [] to localStorage
}
```